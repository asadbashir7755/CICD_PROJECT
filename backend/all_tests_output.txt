ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/tsconfig.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/tsconfig.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
(node:44117) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161
            .mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
                                   ^

Error: Internal Server Error
    at Object.<anonymous> (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161:36)
    at Promise.then.completed (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/testWorker.js:106:12)

Node.js v20.19.4
(node:44116) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/unit/controllers/posts-controller.test.ts
  createPostHandler
    ‚úï Post creation: Success - All fields are valid (16 ms)
    ‚úï Post creation: Failure - Invalid image url (6 ms)
    ‚úï Post creation: Failure - Some fields are missing (5 ms)
    ‚úï Post creation: Failure - Too Many Categories (2 ms)
    ‚úï Post creation: Failure - Internal server error (12 ms)
  getAllPostsHandler
    ‚úï Get all posts: Success - Retrieving all posts list (1 ms)
    ‚úï Get all posts: Failure - Internal Server Error (1 ms)
  getFeaturedPostsHandler
    ‚úï Get featured posts: Success - Retrieving all featured posts list (1 ms)
    ‚úï Get featured posts: Failure - Internal Server Error (1 ms)
  getPostByCategoryHandler
    ‚úï Get posts by category: Success - Retrieving posts list of specified category (2 ms)
    ‚úì Get posts by category: Failure - Invalid category (2 ms)
    ‚úï Get posts by category: Failure - Internal Server Error (1 ms)
  getLatestPostsHandler
    ‚úï Get latest posts: Success - Retrieving most recent posts list (1 ms)
    ‚úï Get latest posts: Failure - Internal Server Error (1 ms)
  getPostByIdHandler
    ‚úï Get post by ID: Success - Retrieving Specific Post (1 ms)
    ‚úï Get post by ID: Failure - Post not found (Specified post ID is invalid)
    ‚úï Get post by ID: Failure - Internal Server Error
  updatePostHandler
    ‚úï Update post: Success - Modifying post content (1 ms)
    ‚úï Update post: Failure - Post not found (Specified post ID is invalid) (1 ms)
    ‚úï Update post: Failure - Internal Server Error (1 ms)
  deletePostByIdHandler
    ‚úï Delete Post: Success - Removing Post with specified ID (1 ms)
    ‚úï Delete Post: Failure - Post not found (Specified post ID is invalid) (1 ms)
    ‚úï Delete Post: Failure - Internal Server Error (1 ms)

  ‚óè createPostHandler ‚Ä∫ Post creation: Success - All fields are valid

    expect(received).toHaveBeenCalledTimes(expected)

    Matcher error: received value must be a mock or spy function

    Received has type:  function
    Received has value: [Function model]

      36 |     await createPostHandler(req, res);
      37 |
    > 38 |     expect(Post).toHaveBeenCalledTimes(1);
         |                  ^
      39 |     expect(Post).toHaveBeenCalledWith(postObject);
      40 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.OK);
      41 |     expect(res.json).toHaveBeenCalledWith(postObject);

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:38:18)

  ‚óè createPostHandler ‚Ä∫ Post creation: Failure - Invalid image url

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 400
    Received
           1: 500
           2: 500

    Number of calls: 2

      50 |     await createPostHandler(req, res);
      51 |
    > 52 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.BAD_REQUEST);
         |                        ^
      53 |     expect(res.json).toHaveBeenCalledWith({
      54 |       message: RESPONSE_MESSAGES.POSTS.INVALID_IMAGE_URL,
      55 |     });

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:52:24)

  ‚óè createPostHandler ‚Ä∫ Post creation: Failure - Some fields are missing

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 400
    Received
           1: 500
           2: 500
           3: 500

    Number of calls: 3

      65 |     await createPostHandler(req, res);
      66 |
    > 67 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.BAD_REQUEST);
         |                        ^
      68 |     expect(res.json).toHaveBeenCalledWith({ message: RESPONSE_MESSAGES.COMMON.REQUIRED_FIELDS });
      69 |   });
      70 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:67:24)

  ‚óè createPostHandler ‚Ä∫ Post creation: Failure - Too Many Categories

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: 400
    Received
           1: 500
           2: 500
           3: 500

    Number of calls: 4

      77 |     await createPostHandler(req, res);
      78 |
    > 79 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.BAD_REQUEST);
         |                        ^
      80 |     expect(res.json).toHaveBeenCalledWith({
      81 |       message: RESPONSE_MESSAGES.POSTS.MAX_CATEGORIES,
      82 |     });

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:79:24)

  ‚óè createPostHandler ‚Ä∫ Post creation: Failure - Internal server error

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"message": "Internal Server Error"}
    Received
           1
              Object {
            -   "message": "Internal Server Error",
            +   "message": [TypeError: Cannot read properties of undefined (reading '_id')],
              },
           2
              Object {
            -   "message": "Internal Server Error",
            +   "message": [TypeError: Cannot read properties of undefined (reading '_id')],
              },
           3
              Object {
            -   "message": "Internal Server Error",
            +   "message": [TypeError: Cannot read properties of undefined (reading '_id')],
              },

    Number of calls: 5

      92 |
      93 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.INTERNAL_SERVER_ERROR);
    > 94 |     expect(res.json).toHaveBeenCalledWith({
         |                      ^
      95 |       message: RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR,
      96 |     });
      97 |   });

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:94:22)

  ‚óè getAllPostsHandler ‚Ä∫ Get all posts: Success - Retrieving all posts list

    TypeError: Post.find.mockResolvedValue is not a function

      108 |     ];
      109 |
    > 110 |     (Post as any).find.mockResolvedValue(mockPosts);
          |                        ^
      111 |
      112 |     await getAllPostsHandler(req, res);
      113 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:110:24)

  ‚óè getAllPostsHandler ‚Ä∫ Get all posts: Failure - Internal Server Error

    TypeError: Post.find.mockRejectedValueOnce is not a function

      118 |   it('Get all posts: Failure - Internal Server Error', async () => {
      119 |     const req: any = createRequestObject();
    > 120 |     (Post as any).find.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                        ^
      121 |     await getAllPostsHandler(req, res);
      122 |
      123 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.INTERNAL_SERVER_ERROR);

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:120:24)

  ‚óè getFeaturedPostsHandler ‚Ä∫ Get featured posts: Success - Retrieving all featured posts list

    TypeError: Post.find.mockResolvedValue is not a function

      138 |     ];
      139 |
    > 140 |     (Post as any).find.mockResolvedValue(mockFeaturedPosts);
          |                        ^
      141 |
      142 |     await getFeaturedPostsHandler(req, res);
      143 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:140:24)

  ‚óè getFeaturedPostsHandler ‚Ä∫ Get featured posts: Failure - Internal Server Error

    TypeError: Post.find.mockRejectedValueOnce is not a function

      148 |   it('Get featured posts: Failure - Internal Server Error', async () => {
      149 |     const req: any = createRequestObject();
    > 150 |     (Post as any).find.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                        ^
      151 |     await getFeaturedPostsHandler(req, res);
      152 |
      153 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.INTERNAL_SERVER_ERROR);

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:150:24)

  ‚óè getPostByCategoryHandler ‚Ä∫ Get posts by category: Success - Retrieving posts list of specified category

    TypeError: Post.find.mockResolvedValue is not a function

      168 |     ];
      169 |
    > 170 |     (Post as any).find.mockResolvedValue(mockPosts);
          |                        ^
      171 |
      172 |     await getPostByCategoryHandler(req, res);
      173 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:170:24)

  ‚óè getPostByCategoryHandler ‚Ä∫ Get posts by category: Failure - Internal Server Error

    TypeError: Post.find.mockRejectedValueOnce is not a function

      188 |     const req: any = createRequestObject({ params: { category: validCategories[1] } });
      189 |
    > 190 |     (Post as any).find.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                        ^
      191 |
      192 |     await getPostByCategoryHandler(req, res);
      193 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:190:24)

  ‚óè getLatestPostsHandler ‚Ä∫ Get latest posts: Success - Retrieving most recent posts list

    TypeError: Post.find.mockResolvedValueOnce is not a function

      209 |     ];
      210 |
    > 211 |     (Post as any).find.mockResolvedValueOnce(mockPosts);
          |                        ^
      212 |
      213 |     await getLatestPostsHandler(req, res);
      214 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:211:24)

  ‚óè getLatestPostsHandler ‚Ä∫ Get latest posts: Failure - Internal Server Error

    TypeError: Post.find.mockRejectedValueOnce is not a function

      220 |     const req: any = createRequestObject();
      221 |
    > 222 |     (Post as any).find.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                        ^
      223 |
      224 |     await getLatestPostsHandler(req, res);
      225 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:222:24)

  ‚óè getPostByIdHandler ‚Ä∫ Get post by ID: Success - Retrieving Specific Post

    TypeError: Post.findById.mockResolvedValueOnce is not a function

      237 |     const mockPost: any = createPostObject({ _id: '6910293383' });
      238 |
    > 239 |     (Post as any).findById.mockResolvedValueOnce(mockPost);
          |                            ^
      240 |
      241 |     await getPostByIdHandler(req, res);
      242 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:239:28)

  ‚óè getPostByIdHandler ‚Ä∫ Get post by ID: Failure - Post not found (Specified post ID is invalid)

    TypeError: Post.findById.mockResolvedValue is not a function

      248 |     const req: any = createRequestObject({ params: { id: '6910293383' } });
      249 |
    > 250 |     (Post as any).findById.mockResolvedValue(null);
          |                            ^
      251 |
      252 |     await getPostByIdHandler(req, res);
      253 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:250:28)

  ‚óè getPostByIdHandler ‚Ä∫ Get post by ID: Failure - Internal Server Error

    TypeError: Post.findById.mockRejectedValueOnce is not a function

      259 |     const req: any = createRequestObject({ params: { id: '6910293383' } });
      260 |
    > 261 |     (Post as any).findById.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                            ^
      262 |
      263 |     await getPostByIdHandler(req, res);
      264 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:261:28)

  ‚óè updatePostHandler ‚Ä∫ Update post: Success - Modifying post content

    TypeError: Post.findByIdAndUpdate.mockResolvedValueOnce is not a function

      280 |
      281 |     // Mock the behavior of Post.findByIdAndUpdate
    > 282 |     (Post as any).findByIdAndUpdate.mockResolvedValueOnce(mockPost);
          |                                     ^
      283 |
      284 |     await updatePostHandler(req, res);
      285 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:282:37)

  ‚óè updatePostHandler ‚Ä∫ Update post: Failure - Post not found (Specified post ID is invalid)

    TypeError: Post.findByIdAndUpdate.mockResolvedValueOnce is not a function

      295 |
      296 |     // Mock the behavior of Post.findByIdAndUpdate
    > 297 |     (Post as any).findByIdAndUpdate.mockResolvedValueOnce(null);
          |                                     ^
      298 |
      299 |     await updatePostHandler(req, res);
      300 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:297:37)

  ‚óè updatePostHandler ‚Ä∫ Update post: Failure - Internal Server Error

    TypeError: Post.findByIdAndUpdate.mockRejectedValueOnce is not a function

      309 |     });
      310 |     // Mock the behavior of Post.findByIdAndUpdate
    > 311 |     (Post as any).findByIdAndUpdate.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                                     ^
      312 |     await updatePostHandler(req, res);
      313 |
      314 |     expect(res.status).toHaveBeenCalledWith(HTTP_STATUS.INTERNAL_SERVER_ERROR);

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:311:37)

  ‚óè deletePostByIdHandler ‚Ä∫ Delete Post: Success - Removing Post with specified ID

    TypeError: Post.findByIdAndDelete.mockResolvedValueOnce is not a function

      326 |
      327 |     // Mock the behavior of Post.findByIdAndRemove
    > 328 |     (Post as any).findByIdAndDelete.mockResolvedValueOnce(mockPost);
          |                                     ^
      329 |
      330 |     await deletePostByIdHandler(req, res);
      331 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:328:37)

  ‚óè deletePostByIdHandler ‚Ä∫ Delete Post: Failure - Post not found (Specified post ID is invalid)

    TypeError: Post.findByIdAndDelete.mockRejectedValueOnce is not a function

      341 |     // Mock the behavior of Post.findByIdAndRemove
      342 |
    > 343 |     (Post as any).findByIdAndDelete.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                                     ^
      344 |
      345 |     await deletePostByIdHandler(req, res);
      346 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:343:37)

  ‚óè deletePostByIdHandler ‚Ä∫ Delete Post: Failure - Internal Server Error

    TypeError: Post.findByIdAndDelete.mockRejectedValueOnce is not a function

      353 |
      354 |     // Mock the behavior of Post.findByIdAndRemove
    > 355 |     (Post as any).findByIdAndDelete.mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
          |                                     ^
      356 |
      357 |     await deletePostByIdHandler(req, res);
      358 |

      at Object.<anonymous> (tests/unit/controllers/posts-controller.test.ts:355:37)

  console.log
    üöÄ Starting server...

      at log (server.ts:9:9)

  console.log
    üì° Connecting to databases...

      at log (server.ts:15:13)

(node:44115) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
FAIL tests/integration/controllers/posts-controller.test.ts (6.278 s)
  Integration Tests: Post creation
    ‚úï Post creation: Success - All fields are valid (11 ms)
    ‚úï Post creation: Failure - Missing required fields (1 ms)
    ‚úï Post creation: Failure - Invalid category count (16 ms)
    ‚úï Post creation: Failure - Invalid image URL format (1 ms)
    ‚úï Post creation: Failure - Internal server error (6 ms)
  Integration Tests: Get all posts
    ‚úï Get all posts: Success (3 ms)
  Integration Tests: Get all posts by category
    ‚úï Get all posts by category: Success (2 ms)
    ‚úï Get all posts by category: Failure - Invalid category (1 ms)
  Integration Tests: Get all featured posts
    ‚úï Get all featured posts: Success (4 ms)
  Integration Tests: Get all latest posts
    ‚úï Get all latest posts: Success (4 ms)
  Integration Tests: Update Post
    ‚úï Update Post: Success - Update Post of existing ID (1 ms)
    ‚úï Update Post: Failure - Invalid post ID (4 ms)
  Integration Tests: Delete Post
    ‚úï Delete Post: Success - Removing Post with specific ID (3 ms)
    ‚úï Delete Post: Failure - Invalid post ID (1 ms)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Success - All fields are valid

    TypeError: Cannot read properties of undefined (reading 'address')

      14 | describe('Integration Tests: Post creation', () => {
      15 |   it('Post creation: Success - All fields are valid', async () => {
    > 16 |     const response = await request(server).post('/api/posts').send(createPostObject());
         |                                            ^
      17 |     postId = response.body._id;
      18 |     const fetchedPost = await Post.findById(postId);
      19 |

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:16:44)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Missing required fields

    TypeError: Cannot read properties of undefined (reading 'address')

      27 |     const postObject = createPostObject();
      28 |     delete postObject.title;
    > 29 |     const response = await request(server).post('/api/posts').send(postObject);
         |                                            ^
      30 |
      31 |     expect(JSON.parse(response.text)).toEqual({
      32 |       message: RESPONSE_MESSAGES.COMMON.REQUIRED_FIELDS,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:29:44)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Invalid category count

    TypeError: Cannot read properties of undefined (reading 'address')

      39 |       categories: [validCategories[0], validCategories[1], validCategories[2], validCategories[3]],
      40 |     });
    > 41 |     const response = await request(server).post('/api/posts').send(postObject);
         |                                            ^
      42 |
      43 |     expect(JSON.parse(response.text)).toEqual({
      44 |       message: RESPONSE_MESSAGES.POSTS.MAX_CATEGORIES,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:41:44)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Invalid image URL format

    TypeError: Cannot read properties of undefined (reading 'address')

      51 |       imageLink: 'https://www.invalid-image.gif',
      52 |     });
    > 53 |     const response = await request(server).post('/api/posts').send(postObject);
         |                                            ^
      54 |
      55 |     expect(JSON.parse(response.text)).toEqual({
      56 |       message: RESPONSE_MESSAGES.POSTS.INVALID_IMAGE_URL,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:53:44)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Internal server error

    TypeError: Cannot read properties of undefined (reading 'address')

      66 |
      67 |     const postObject = createPostObject();
    > 68 |     const response = await request(server).post('/api/posts').send(postObject);
         |                                            ^
      69 |
      70 |     expect(response.status).toBe(HTTP_STATUS.INTERNAL_SERVER_ERROR);
      71 |     expect(JSON.parse(response.text)).toEqual({

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:68:44)

  ‚óè Integration Tests: Get all posts ‚Ä∫ Get all posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      76 | describe('Integration Tests: Get all posts', () => {
      77 |   it('Get all posts: Success', async () => {
    > 78 |     const response = await request(server).get('/api/posts');
         |                                            ^
      79 |
      80 |     expect(response.status).toBe(HTTP_STATUS.OK);
      81 |     expect(response.body).toBeInstanceOf(Array);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:78:44)

  ‚óè Integration Tests: Get all posts by category ‚Ä∫ Get all posts by category: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      85 |   it('Get all posts by category: Success', async () => {
      86 |     const category = validCategories[0];
    > 87 |     const response = await request(server).get(`/api/posts/categories/${category}`);
         |                                            ^
      88 |
      89 |     expect(response.status).toBe(HTTP_STATUS.OK);
      90 |     expect(response.body).toBeInstanceOf(Array);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:87:44)

  ‚óè Integration Tests: Get all posts by category ‚Ä∫ Get all posts by category: Failure - Invalid category

    TypeError: Cannot read properties of undefined (reading 'address')

      93 |   it('Get all posts by category: Failure - Invalid category', async () => {
      94 |     const category = 'invalid-category';
    > 95 |     const response = await request(server).get(`/api/posts/categories/${category}`);
         |                                            ^
      96 |
      97 |     expect(response.status).toBe(HTTP_STATUS.BAD_REQUEST);
      98 |     expect(JSON.parse(response.text)).toEqual({

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:95:44)

  ‚óè Integration Tests: Get all featured posts ‚Ä∫ Get all featured posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      103 | describe('Integration Tests: Get all featured posts', () => {
      104 |   it('Get all featured posts: Success', async () => {
    > 105 |     const responseFeatured = await request(server).get('/api/posts/featured');
          |                                                    ^
      106 |
      107 |     expect(responseFeatured.status).toBe(HTTP_STATUS.OK);
      108 |     expect(responseFeatured.body.length).toBeGreaterThan(1);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:105:52)

  ‚óè Integration Tests: Get all latest posts ‚Ä∫ Get all latest posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      111 | describe('Integration Tests: Get all latest posts', () => {
      112 |   it('Get all latest posts: Success', async () => {
    > 113 |     const responseLatest = await request(server).get('/api/posts/latest');
          |                                                  ^
      114 |
      115 |     expect(responseLatest.status).toBe(HTTP_STATUS.OK);
      116 |     expect(responseLatest.body.length).toBeGreaterThan(1);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:113:50)

  ‚óè Integration Tests: Update Post ‚Ä∫ Update Post: Success - Update Post of existing ID

    TypeError: Cannot read properties of undefined (reading 'address')

      122 |
      123 |     const response = await request(server)
    > 124 |       .patch(`/api/posts/${postId}`)
          |        ^
      125 |       .send(createPostObject({ title: 'Updated Post' }));
      126 |     updatedPost = await Post.findById(postId);
      127 |

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as patch] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:124:8)

  ‚óè Integration Tests: Update Post ‚Ä∫ Update Post: Failure - Invalid post ID

    TypeError: Cannot read properties of undefined (reading 'address')

      133 |   it('Update Post: Failure - Invalid post ID', async () => {
      134 |     const response = await request(server)
    > 135 |       .patch(`/api/posts/${invalidPostId}`)
          |        ^
      136 |       .send(createPostObject({ title: 'Updated Post' }));
      137 |
      138 |     expect(response.status).toBe(HTTP_STATUS.NOT_FOUND);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as patch] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:135:8)

  ‚óè Integration Tests: Delete Post ‚Ä∫ Delete Post: Success - Removing Post with specific ID

    TypeError: Cannot read properties of undefined (reading 'address')

      146 |     let deletedPost;
      147 |
    > 148 |     const response = await request(server).delete(`/api/posts/${postId}`);
          |                                                  ^
      149 |
      150 |     deletedPost = await Post.findById(postId);
      151 |

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:148:50)

  ‚óè Integration Tests: Delete Post ‚Ä∫ Delete Post: Failure - Invalid post ID

    TypeError: Cannot read properties of undefined (reading 'address')

      156 |
      157 |   it('Delete Post: Failure - Invalid post ID', async () => {
    > 158 |     const response = await request(server).delete(`/api/posts/${invalidPostId}`);
          |                                                  ^
      159 |
      160 |     expect(response.status).toBe(HTTP_STATUS.NOT_FOUND);
      161 |     expect(JSON.parse(response.text)).toEqual({

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (tests/integration/controllers/posts-controller.test.ts:158:50)


  ‚óè  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Redis Connected: redis://127.0.0.1:6379".



      at console.log (node_modules/@jest/console/build/CustomConsole.js:141:10)
      at connectToRedis (services/redis.ts:240:15)
      at startServer (server.ts:16:5)

  console.log
    üöÄ Starting server...

      at log (dist/server.js:7:9)

  console.log
    üì° Connecting to databases...

      at log (dist/server.js:11:17)

FAIL dist/tests/integration/controllers/posts-controller.test.js
  Integration Tests: Post creation
    ‚úï Post creation: Success - All fields are valid (4 ms)
    ‚úï Post creation: Failure - Missing required fields (1 ms)
    ‚úï Post creation: Failure - Invalid category count (1 ms)
    ‚úï Post creation: Failure - Invalid image URL format (1 ms)
    ‚úï Post creation: Failure - Internal server error (1 ms)
  Integration Tests: Get all posts
    ‚úï Get all posts: Success (2 ms)
  Integration Tests: Get all posts by category
    ‚úï Get all posts by category: Success (1 ms)
    ‚úï Get all posts by category: Failure - Invalid category (1 ms)
  Integration Tests: Get all featured posts
    ‚úï Get all featured posts: Success (1 ms)
  Integration Tests: Get all latest posts
    ‚úï Get all latest posts: Success (2 ms)
  Integration Tests: Update Post
    ‚úï Update Post: Success - Update Post of existing ID (1 ms)
    ‚úï Update Post: Failure - Invalid post ID
  Integration Tests: Delete Post
    ‚úï Delete Post: Success - Removing Post with specific ID (1 ms)
    ‚úï Delete Post: Failure - Invalid post ID (1 ms)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Success - All fields are valid

    TypeError: Cannot read properties of undefined (reading 'address')

      13 | describe('Integration Tests: Post creation', () => {
      14 |     it('Post creation: Success - All fields are valid', async () => {
    > 15 |         const response = await request(server).post('/api/posts').send(createPostObject());
         |                                                ^
      16 |         postId = response.body._id;
      17 |         const fetchedPost = await Post.findById(postId);
      18 |         expect(response.status).toBe(HTTP_STATUS.OK);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:15:48)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Missing required fields

    TypeError: Cannot read properties of undefined (reading 'address')

      24 |         const postObject = createPostObject();
      25 |         delete postObject.title;
    > 26 |         const response = await request(server).post('/api/posts').send(postObject);
         |                                                ^
      27 |         expect(JSON.parse(response.text)).toEqual({
      28 |             message: RESPONSE_MESSAGES.COMMON.REQUIRED_FIELDS,
      29 |         });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:26:48)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Invalid category count

    TypeError: Cannot read properties of undefined (reading 'address')

      34 |             categories: [validCategories[0], validCategories[1], validCategories[2], validCategories[3]],
      35 |         });
    > 36 |         const response = await request(server).post('/api/posts').send(postObject);
         |                                                ^
      37 |         expect(JSON.parse(response.text)).toEqual({
      38 |             message: RESPONSE_MESSAGES.POSTS.MAX_CATEGORIES,
      39 |         });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:36:48)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Invalid image URL format

    TypeError: Cannot read properties of undefined (reading 'address')

      44 |             imageLink: 'https://www.invalid-image.gif',
      45 |         });
    > 46 |         const response = await request(server).post('/api/posts').send(postObject);
         |                                                ^
      47 |         expect(JSON.parse(response.text)).toEqual({
      48 |             message: RESPONSE_MESSAGES.POSTS.INVALID_IMAGE_URL,
      49 |         });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:46:48)

  ‚óè Integration Tests: Post creation ‚Ä∫ Post creation: Failure - Internal server error

    TypeError: Cannot read properties of undefined (reading 'address')

      56 |             .mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
      57 |         const postObject = createPostObject();
    > 58 |         const response = await request(server).post('/api/posts').send(postObject);
         |                                                ^
      59 |         expect(response.status).toBe(HTTP_STATUS.INTERNAL_SERVER_ERROR);
      60 |         expect(JSON.parse(response.text)).toEqual({
      61 |             message: RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as post] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:58:48)

  ‚óè Integration Tests: Get all posts ‚Ä∫ Get all posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      65 | describe('Integration Tests: Get all posts', () => {
      66 |     it('Get all posts: Success', async () => {
    > 67 |         const response = await request(server).get('/api/posts');
         |                                                ^
      68 |         expect(response.status).toBe(HTTP_STATUS.OK);
      69 |         expect(response.body).toBeInstanceOf(Array);
      70 |     });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:67:48)

  ‚óè Integration Tests: Get all posts by category ‚Ä∫ Get all posts by category: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      73 |     it('Get all posts by category: Success', async () => {
      74 |         const category = validCategories[0];
    > 75 |         const response = await request(server).get(`/api/posts/categories/${category}`);
         |                                                ^
      76 |         expect(response.status).toBe(HTTP_STATUS.OK);
      77 |         expect(response.body).toBeInstanceOf(Array);
      78 |     });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:75:48)

  ‚óè Integration Tests: Get all posts by category ‚Ä∫ Get all posts by category: Failure - Invalid category

    TypeError: Cannot read properties of undefined (reading 'address')

      79 |     it('Get all posts by category: Failure - Invalid category', async () => {
      80 |         const category = 'invalid-category';
    > 81 |         const response = await request(server).get(`/api/posts/categories/${category}`);
         |                                                ^
      82 |         expect(response.status).toBe(HTTP_STATUS.BAD_REQUEST);
      83 |         expect(JSON.parse(response.text)).toEqual({
      84 |             message: RESPONSE_MESSAGES.POSTS.INVALID_CATEGORY,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:81:48)

  ‚óè Integration Tests: Get all featured posts ‚Ä∫ Get all featured posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

      88 | describe('Integration Tests: Get all featured posts', () => {
      89 |     it('Get all featured posts: Success', async () => {
    > 90 |         const responseFeatured = await request(server).get('/api/posts/featured');
         |                                                        ^
      91 |         expect(responseFeatured.status).toBe(HTTP_STATUS.OK);
      92 |         expect(responseFeatured.body.length).toBeGreaterThan(1);
      93 |     });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:90:56)

  ‚óè Integration Tests: Get all latest posts ‚Ä∫ Get all latest posts: Success

    TypeError: Cannot read properties of undefined (reading 'address')

       95 | describe('Integration Tests: Get all latest posts', () => {
       96 |     it('Get all latest posts: Success', async () => {
    >  97 |         const responseLatest = await request(server).get('/api/posts/latest');
          |                                                      ^
       98 |         expect(responseLatest.status).toBe(HTTP_STATUS.OK);
       99 |         expect(responseLatest.body.length).toBeGreaterThan(1);
      100 |     });

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as get] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:97:54)

  ‚óè Integration Tests: Update Post ‚Ä∫ Update Post: Success - Update Post of existing ID

    TypeError: Cannot read properties of undefined (reading 'address')

      104 |         let updatedPost;
      105 |         const response = await request(server)
    > 106 |             .patch(`/api/posts/${postId}`)
          |              ^
      107 |             .send(createPostObject({ title: 'Updated Post' }));
      108 |         updatedPost = await Post.findById(postId);
      109 |         expect(response.status).toBe(HTTP_STATUS.OK);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as patch] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:106:14)

  ‚óè Integration Tests: Update Post ‚Ä∫ Update Post: Failure - Invalid post ID

    TypeError: Cannot read properties of undefined (reading 'address')

      113 |     it('Update Post: Failure - Invalid post ID', async () => {
      114 |         const response = await request(server)
    > 115 |             .patch(`/api/posts/${invalidPostId}`)
          |              ^
      116 |             .send(createPostObject({ title: 'Updated Post' }));
      117 |         expect(response.status).toBe(HTTP_STATUS.NOT_FOUND);
      118 |         expect(JSON.parse(response.text)).toEqual({

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> [as patch] (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:115:14)

  ‚óè Integration Tests: Delete Post ‚Ä∫ Delete Post: Success - Removing Post with specific ID

    TypeError: Cannot read properties of undefined (reading 'address')

      124 |     it('Delete Post: Success - Removing Post with specific ID', async () => {
      125 |         let deletedPost;
    > 126 |         const response = await request(server).delete(`/api/posts/${postId}`);
          |                                                      ^
      127 |         deletedPost = await Post.findById(postId);
      128 |         expect(response.status).toBe(HTTP_STATUS.OK);
      129 |         expect(response.body).toHaveProperty('message', RESPONSE_MESSAGES.POSTS.DELETED);

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:126:54)

  ‚óè Integration Tests: Delete Post ‚Ä∫ Delete Post: Failure - Invalid post ID

    TypeError: Cannot read properties of undefined (reading 'address')

      131 |     });
      132 |     it('Delete Post: Failure - Invalid post ID', async () => {
    > 133 |         const response = await request(server).delete(`/api/posts/${invalidPostId}`);
          |                                                      ^
      134 |         expect(response.status).toBe(HTTP_STATUS.NOT_FOUND);
      135 |         expect(JSON.parse(response.text)).toEqual({
      136 |             message: RESPONSE_MESSAGES.POSTS.NOT_FOUND,

      at Test.serverAddress (node_modules/supertest/lib/test.js:46:22)
      at new Test (node_modules/supertest/lib/test.js:34:14)
      at Object.obj.<computed> (node_modules/supertest/index.js:43:18)
      at Object.<anonymous> (dist/tests/integration/controllers/posts-controller.test.js:133:54)


  ‚óè  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Redis Connected: redis://127.0.0.1:6379".



      at console.log (node_modules/@jest/console/build/CustomConsole.js:141:10)
      at connectToRedis (dist/services/redis.js:233:15)
      at startServer (dist/server.js:12:9)

(node:44169) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161
            .mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
                                   ^

Error: Internal Server Error
    at Object.<anonymous> (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161:36)
    at Promise.then.completed (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/testWorker.js:106:12)

Node.js v20.19.4

  ‚óè  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Database connected: mongodb+srv://asadbashir2229526:cNCZdyfgWg1EP99B@mymernappcluster.oxqwv.mongodb.net/wanderlust?retryWrites=true&w=majority&appName=MyMERNAppCluster".



      at console.log (node_modules/@jest/console/build/CustomConsole.js:141:10)
      at connectDB (dist/config/db.js:200:13)
      at startServer (dist/server.js:13:9)

node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8082
    at Server.setupListenHandle [as _listen2] (node:net:1902:16)
    at listenInCluster (node:net:1959:12)
    at Server.listen (node:net:2061:7)
    at Function.listen (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/express/lib/application.js:635:24)
    at listen (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/server.js:15:22)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1938:8)
    at processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '::',
  port: 8082
}

Node.js v20.19.4

  ‚óè  Cannot log after tests are done. Did you forget to wait for something async in your test?
    Attempted to log "Database connected: mongodb+srv://asadbashir2229526:cNCZdyfgWg1EP99B@mymernappcluster.oxqwv.mongodb.net/wanderlust?retryWrites=true&w=majority&appName=MyMERNAppCluster".



      at console.log (node_modules/@jest/console/build/CustomConsole.js:141:10)
      at connectDB (config/db.ts:207:13)
      at startServer (server.ts:17:5)

node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::8082
    at Server.setupListenHandle [as _listen2] (node:net:1902:16)
    at listenInCluster (node:net:1959:12)
    at Server.listen (node:net:2061:7)
    at Function.listen (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/express/lib/application.js:635:24)
    at listen (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/server.ts:21:18)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1938:8)
    at processTicksAndRejections (node:internal/process/task_queues:82:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '::',
  port: 8082
}

Node.js v20.19.4
(node:44189) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161
            .mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
                                   ^

Error: Internal Server Error
    at Object.<anonymous> (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161:36)
    at Promise.then.completed (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/testWorker.js:106:12)

Node.js v20.19.4
(node:44210) ExperimentalWarning: VM Modules is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161
            .mockRejectedValueOnce(new Error(RESPONSE_MESSAGES.COMMON.INTERNAL_SERVER_ERROR));
                                   ^

Error: Internal Server Error
    at Object.<anonymous> (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/dist/tests/unit/controllers/posts-controller.test.js:161:36)
    at Promise.then.completed (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (<anonymous>)
    at callAsyncCircusFn (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:121:9)
    at run (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/node_modules/jest-runner/build/testWorker.js:106:12)

Node.js v20.19.4
FAIL dist/tests/unit/controllers/posts-controller.test.js
  ‚óè Test suite failed to run

    Jest worker encountered 4 child process exceptions, exceeding retry limit

      at ChildProcessWorker.initialize (node_modules/jest-worker/build/workers/ChildProcessWorker.js:181:21)

--------------------------|---------|----------|---------|---------|-------------------------------------------------------------------
File                      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                 
--------------------------|---------|----------|---------|---------|-------------------------------------------------------------------
All files                 |   28.03 |       16 |   12.26 |   28.03 |                                                                   
 backend                  |   67.74 |        0 |      25 |   67.74 |                                                                   
  app.ts                  |   88.23 |      100 |       0 |   88.23 | 36,40                                                             
  server.ts               |   42.85 |        0 |      50 |   42.85 | 17-29                                                             
 backend/config           |   32.69 |     7.14 |       0 |   32.69 |                                                                   
  db.ts                   |       0 |      100 |       0 |       0 | 5-20                                                              
  passport.ts             |   10.71 |        0 |       0 |   10.71 | 14-49,56,60-65                                                    
  utils.ts                |   93.33 |       50 |       0 |   93.33 | 23                                                                
 backend/controllers      |    12.9 |     2.32 |   11.76 |    12.9 |                                                                   
  auth-controller.ts      |    4.87 |        0 |       0 |    4.87 | 15-70,89-123,142-165,175-251                                      
  posts-controller.ts     |   22.66 |     7.14 |   22.22 |   22.66 | 19-65,72-77,82-87,101-104,109-114,119-129,134-149,154-169,174-186 
  user-controller.ts      |   10.34 |        0 |       0 |   10.34 | 7-12,19-38,45-55                                                  
 backend/dist             |   67.74 |        0 |      25 |   67.74 |                                                                   
  app.js                  |   88.23 |      100 |       0 |   88.23 | 30,33                                                             
  server.js               |   42.85 |        0 |      50 |   42.85 | 13-23                                                             
 backend/dist/config      |   32.69 |     6.25 |       0 |   32.69 |                                                                   
  db.js                   |       0 |      100 |       0 |       0 | 4-18                                                              
  passport.js             |   10.71 |        0 |       0 |   10.71 | 10-39,43,46-52                                                    
  utils.js                |   93.33 |       50 |       0 |   93.33 | 17                                                                
 backend/dist/controllers |    8.74 |        0 |       0 |    8.74 |                                                                   
  auth-controller.js      |    4.87 |        0 |       0 |    4.87 | 12-60,72-100,112-127,137-208                                      
  posts-controller.js     |    12.5 |        0 |       0 |    12.5 | 6-48,52-58,62-68,72-84,88-94,98-107,111-126,130-144,148-161       
  user-controller.js      |   10.34 |        0 |       0 |   10.34 | 5-11,17-38,44-55                                                  
 backend/dist/middlewares |    12.9 |        0 |       0 |    12.9 |                                                                   
  auth-middleware.js      |   13.33 |        0 |       0 |   13.33 | 8-22,29-36                                                        
  error-middleware.js     |      25 |        0 |       0 |      25 | 3-9                                                               
  post-middleware.js      |    8.33 |        0 |       0 |    8.33 | 4-20                                                              
 backend/dist/models      |      40 |        0 |       0 |      40 |                                                                   
  post.js                 |     100 |      100 |     100 |     100 |                                                                   
  user.js                 |   36.84 |        0 |       0 |   36.84 | 69-73,76,79,89,99-103                                             
 backend/dist/routes      |   77.41 |        0 |       0 |   77.41 |                                                                   
  auth.js                 |   53.33 |        0 |       0 |   53.33 | 13-22,25-26                                                       
  posts.js                |     100 |      100 |     100 |     100 |                                                                   
  user.js                 |     100 |      100 |     100 |     100 |                                                                   
 backend/dist/services    |      50 |       50 |      50 |      50 |                                                                   
  redis.js                |      50 |       50 |      50 |      50 | 11-22                                                             
 backend/dist/tests/utils |      80 |    72.22 |      50 |      80 |                                                                   
  helper-objects.js       |      80 |    72.22 |      50 |      80 | 16                                                                
 backend/dist/types       |     100 |      100 |     100 |     100 |                                                                   
  role-type.js            |     100 |      100 |     100 |     100 |                                                                   
 backend/dist/utils       |      25 |    15.38 |   18.18 |      24 |                                                                   
  api-error.js            |       0 |        0 |       0 |       0 | 5-15                                                              
  api-response.js         |       0 |        0 |       0 |       0 | 4-7                                                               
  async-handler.js        |      50 |      100 |   33.33 |   66.66 | 3                                                                 
  cache-posts.js          |       0 |        0 |       0 |       0 | 5-28                                                              
  constants.js            |     100 |      100 |     100 |     100 |                                                                   
  cookie_options.js       |     100 |       50 |     100 |     100 | 3-8                                                               
  middleware.js           |   22.22 |        0 |      50 |    12.5 | 4-13                                                              
 backend/middlewares      |    12.9 |        0 |       0 |    12.9 |                                                                   
  auth-middleware.ts      |   13.33 |        0 |       0 |   13.33 | 16-32,42-49                                                       
  error-middleware.ts     |      25 |        0 |       0 |      25 | 5-11                                                              
  post-middleware.ts      |    8.33 |        0 |       0 |    8.33 | 6-22                                                              
 backend/models           |      40 |        0 |       0 |      40 |                                                                   
  post.ts                 |     100 |      100 |     100 |     100 |                                                                   
  user.ts                 |   36.84 |        0 |       0 |   36.84 | 92-96,103,107,122,137-141                                         
 backend/routes           |   77.41 |        0 |       0 |   77.41 |                                                                   
  auth.ts                 |   53.33 |        0 |       0 |   53.33 | 26-35,40-41                                                       
  posts.ts                |     100 |      100 |     100 |     100 |                                                                   
  user.ts                 |     100 |      100 |     100 |     100 |                                                                   
 backend/services         |      50 |       50 |      50 |      50 |                                                                   
  redis.ts                |      50 |       50 |      50 |      50 | 12-22                                                             
 backend/tests/utils      |     100 |      100 |     100 |     100 |                                                                   
  helper-objects.ts       |     100 |      100 |     100 |     100 |                                                                   
 backend/types            |     100 |      100 |     100 |     100 |                                                                   
  role-type.ts            |     100 |      100 |     100 |     100 |                                                                   
 backend/utils            |      25 |       20 |   18.18 |   25.53 |                                                                   
  api-error.ts            |       0 |        0 |       0 |       0 | 22-32                                                             
  api-response.ts         |       0 |        0 |       0 |       0 | 10-13                                                             
  async-handler.ts        |      50 |      100 |   33.33 |   66.66 | 5                                                                 
  cache-posts.ts          |       0 |        0 |       0 |       0 | 6-31                                                              
  constants.ts            |     100 |      100 |     100 |     100 |                                                                   
  cookie_options.ts       |     100 |       50 |     100 |     100 | 10-16                                                             
  middleware.ts           |   22.22 |        0 |      50 |    12.5 | 7-15                                                              
--------------------------|---------|----------|---------|---------|-------------------------------------------------------------------
Test Suites: 4 failed, 4 total
Tests:       50 failed, 1 passed, 51 total
Snapshots:   0 total
Time:        14.195 s
Ran all test suites.
ts-jest[config] (WARN) 
    The "ts-jest" config option "isolatedModules" is deprecated and will be removed in v30.0.0. Please use "isolatedModules: true" in /home/asadbashir/asad/DevOpS-Practice/ci-cd/gravity_project/wanderlust/backend/tsconfig.json instead, see https://www.typescriptlang.org/tsconfig/#isolatedModules
  
